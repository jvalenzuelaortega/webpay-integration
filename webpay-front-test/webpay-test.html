<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Test - Webpay</title>
</head>

<body>
   <h1>Webpay Testing</h1>

   <div>
      <h2>Create transaction</h2>

      <button>Create</button>
   </div>

   <br>

   <div>
      <form method="post" action="https://webpay3gint.transbank.cl/webpayserver/initTransaction">
         <input type="hidden" name="token_ws"
            value="01ab41d4b97288bb62313a2c7e93cf0c9e43049a161760a728e57b9ee5ad11eb" />
         <input type="submit" value="Pay transaction" />
      </form>
   </div>
</body>

<script>


   function createTransaction() {
      //TODO: add query params in url
      const url = 'http://localhost:8080/create-transaction';
      const options = {
         method: 'GET',
         headers: {
            'Content-Type': 'application/json'
         }
      };


      fetch(url, options)
         .then(response => {
            if (!response.ok) {
               throw new Error("error call microservice")
            }

            return response.json();
         })
         .then(data => {
            console.log(data);
         })
         .catch(error => {
            console.error('Problem with operation: ', error);
         });
   }


</script>

</html>